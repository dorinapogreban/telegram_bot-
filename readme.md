Телеграмм бот по поиску отелей
==============================

Основные функции
----------------

* Поиск отелей в заданном городе
* Вывод самих дорогих, дешевых отелей, либо находящихся ближе к центру
* Настройка параметров вывода
  * количества отелей
  * выводить или нет фотографии
* Расчет стоимости проживания по указанным датам
* Сохранение истории поиска


**_Источник информации для бота - API сайта [Hotels.com](https://www.hotels.com/)_**

Инструкция по установке и первому запуску 
-----------------------------------------

1. Скопировать файлы проекта
```commandline
git clone https://gitlab.skillbox.ru/pogreban_dorina/python_basic_diploma.git
```
Эта команда создаст папку `python_basic_diploma`  и сохранит в ней все требуемые файлы.

2. Установить зависимости:
```commandline
pip install -r requirements.txt
```
*Рекомендуется настроить [виртуальное окружение](https://docs.python.org/3/library/venv.html).*

3. Получить ключ для работы с API
   1. Зарегистрироваться на сайте [rapidapi.com](https://rapidapi.com)
   2. Оформить подписку на [API Hotels](https://rapidapi.com/apidojo/api/hotels4/)

4. Создать нового бота и получить токен для работы с ним.  
    1. В приложении telegramm нужно бота [BotFather](https://t.me/botfather)
    2. Создать нового бота командой `/newbot`
    3. Выполнить несколько простых шагов  
[Руководство](https://core.telegram.org/bots#6-botfather) 

5. Переименовать файл `.env.template` в `.env`, указать в нем свой токен для бота и ключ от Rapid API  
Пример файла `.env`:
```dotenv
BOT_TOKEN='5129698927:AAGDrtF8BhpsZkfJkz8d8V8sd80--------'
RAPID_API_KEY='e16bf7299amsh132539e6181c99dp1996efjsnf55b--------'
```

6. Запустить программу
```commandline
python main.py
```

Работа с телеграмм ботом
------------------------
### Начало работы
Для начала работы отправьте боту команду `/start`

### Поиск отелей
Можно выбрать тип отелей для получения: **Недорогие**, **Дорогие**, **Ближе к центру**.

![Изображение экрана](/urils/photo/1.png)

Можно **Выбрать город**

![Изображение экрана](/urils/photo/2.png)

Можно **Указать даты** проживания

![Изображение экрана](/urils/photo/3.png)

![Изображение экрана](/urils/photo/4.png)

Можно выбрать **Кол-во отелей**, можно выбрать режим вывода фотографий *Да/Нет* и **Кол-во фото**

![Изображение экрана](/urils/photo/5.png)

![Изображение экрана](/urils/photo/6.png)

![Изображение экрана](/urils/photo/7.png)

Можно задать диапазон **Расстоянии от центра города**

![Изображение экрана](/urils/photo/10.png)

Можно посмотреть **Историю** своих запросов

![Изображение экрана](/urils/photo/11.png)


### Пример ответа телеграм бота.  
**Город:** Париж  
**Отели** дорогие

![Изображение экрана](/urils/photo/8.png "Ответ без фото")

![Изображение экрана](/urils/photo/9.png "Ответ с фото")


Разработчикам
-------------

История поиска реализована в виде базы данных SQLite.
Если база не существует, то она создается при первом запуске бота.
